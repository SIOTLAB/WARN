# remote-server for WARN
This is the remote server component for WARN. It is responsible for managing accounts, storing attack history, and delivering attack notifications to the WARN app.

# How to run
## Prerequisites
### Required
- Rust (including `cargo`) 
- libpq (postgres backend library)

### Optional
- diesel_cli from Cargo for automatically running migrations
    - requires openssl

## Env setup
Create a file in the directory called `.env` and add four fields to it:
- DATABASE_URL (The url for the database in the format postgres://username:password@address/warn_db )
- KID (The Key ID for apple push notifications)
- ISS (The issuer key from the Apple Developer account)
- AUTHKEY (The path to the authentication token signing key generated by Apple)

## Running migrations (optional)
This program uses the Diesel library for database interfacting. To use the migration scripts, install the diesel_cli helper tool using `cargo install diesel_cli --version 2.0.1 --no-default-features --features postgres` and run `diesel migration run` to preload the database with the right tables. It will use the DATABASE_URL location from the .env file.

## Running
Run `cargo run (--release) [address] [port]` to start the server.